<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Volty Trading Bot - Advanced Algorithmic Trading Platform">
    <title>Volty Trading Bot - Live Trading</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="assets/images/favicon.png">
</head>
<body>
    <!-- Loading Indicator -->
    <div class="loading-indicator" id="loadingIndicator">
        <div class="loading-spinner"></div>
        <div>Initializing Volty Trading Bot...</div>
    </div>

    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-logo">
                    <i class="fas fa-bolt"></i>
                    <span>Volty Bot</span>
                </div>
                <button id="sidebar-toggle" class="btn-sm" aria-label="Toggle sidebar">
                    <i class="fas fa-chevron-left"></i>
                </button>
            </div>
            <div class="sidebar-content">
                <nav>
                    <div class="nav-section">
                        <div class="nav-section-title">Navigation</div>
                        <a href="#" class="nav-item active" aria-current="page">
                            <i class="fas fa-chart-line"></i>
                            <span>Live Trading</span>
                        </a>
                        <a href="../paper/paper.html" class="nav-item">
                            <i class="fas fa-history"></i>
                            <span>Paper Trading</span>
                        </a>
                        <a href="#" class="nav-item" onclick="openStrategyBuilder()">
                            <i class="fas fa-sliders-h"></i>
                            <span>Strategy Builder</span>
                        </a>
                        <a href="../backtest/backtest.py" class="nav-item" target="_blank">
                            <i class="fas fa-chart-bar"></i>
                            <span>Backtester</span>
                        </a>
                    </div>
                    
                    <div class="nav-section">
                        <div class="nav-section-title">Settings</div>
                        <a href="#" class="nav-item" data-toggle="modal" data-target="settingsModal">
                            <i class="fas fa-cog"></i>
                            <span>General Settings</span>
                        </a>
                        <a href="#" class="nav-item" data-toggle="modal" data-target="apiConfigModal">
                            <i class="fas fa-key"></i>
                            <span>API Configuration</span>
                        </a>
                        <a href="#" class="nav-item" data-toggle="modal" data-target="notificationsModal">
                            <i class="fas fa-bell"></i>
                            <span>Notifications</span>
                        </a>
                    </div>
                    
                    <div class="nav-section">
                        <div class="nav-section-title">Support</div>
                        <a href="#" class="nav-item">
                            <i class="fas fa-book"></i>
                            <span>Documentation</span>
                        </a>
                        <a href="#" class="nav-item">
                            <i class="fas fa-question-circle"></i>
                            <span>Help Center</span>
                        </a>
                    </div>
                </nav>
            </div>
            <div class="sidebar-footer">
                <div>Volty Trading Bot v2.0.0</div>
                <div>&copy; 2025 Volty Trading</div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Top Bar -->
            <header class="top-bar">
                <div class="trading-mode">
                    <button id="paper-trading-btn" class="mode-btn active">Paper Trading</button>
                    <button id="live-trading-btn" class="mode-btn">Live Trading</button>
                </div>
                
                <div class="market-info">
                    <div class="market-badge" id="market-symbol-badge">BTC/USDT</div>
                    <select id="symbol" class="form-control form-control-sm">
                        <option value="BTCUSDT">BTC/USDT</option>
                        <option value="ETHUSDT">ETH/USDT</option>
                        <option value="BNBUSDT">BNB/USDT</option>
                        <option value="ADAUSDT">ADA/USDT</option>
                        <option value="SOLUSDT">SOL/USDT</option>
                        <option value="DOGEUSDT">DOGE/USDT</option>
                        <option value="DOTUSDT">DOT/USDT</option>
                    </select>
                    <select id="timeframe" class="form-control form-control-sm">
                        <option value="1m">1m</option>
                        <option value="5m">5m</option>
                        <option value="15m">15m</option>
                        <option value="30m">30m</option>
                        <option value="1h" selected>1h</option>
                        <option value="4h">4h</option>
                        <option value="1d">1d</option>
                    </select>
                </div>
                
                <div class="user-dropdown">
                    <div class="user-avatar">G</div>
                    <div class="user-info">gelimorto2</div>
                    <i class="fas fa-chevron-down"></i>
                    <div class="dropdown-menu">
                        <a href="#" class="dropdown-item">
                            <i class="fas fa-user"></i> Profile
                        </a>
                        <a href="#" class="dropdown-item">
                            <i class="fas fa-cog"></i> Settings
                        </a>
                        <div class="dropdown-divider"></div>
                        <a href="#" class="dropdown-item">
                            <i class="fas fa-sign-out-alt"></i> Logout
                        </a>
                    </div>
                </div>
            </header>

            <!-- Content Area -->
            <div class="content-area">
                <!-- Chart Container -->
                <div class="chart-container">
                    <div class="tradingview-widget-container">
                        <div class="tradingview-widget-container__widget"></div>
                        <div class="tradingview-widget-copyright">
                            <a href="https://www.tradingview.com/" rel="noopener nofollow" target="_blank">
                                <span class="blue-text">Chart by TradingView</span>
                            </a>
                        </div>
                    </div>
                    
                    <!-- Overlay Controls -->
                    <div class="overlay-controls">
                        <div class="status-indicator idle" id="bot-status">
                            <div class="bot-activity waiting" id="bot-activity"></div>
                            <span>BOT IDLE</span>
                        </div>
                        
                        <div id="activity-status">Ready to start trading</div>
                    </div>
                    
                    <!-- Mode Indicators -->
                    <div class="mode-indicator" id="practice-mode-indicator">
                        <i class="fas fa-flask"></i>
                        <span>PRACTICE MODE</span>
                    </div>
                    
                    <div class="mode-indicator" id="live-mode-indicator">
                        <i class="fas fa-broadcast-tower"></i>
                        <span>LIVE TRADING</span>
                    </div>
                    
                    <!-- Floating Position Indicator -->
                    <div class="floating-position-indicator" id="floating-position-indicator"></div>
                    
                    <!-- Bot Controls -->
                    <div class="bot-controls">
                        <div id="paper-trading-buttons">
                            <button id="start-trading-btn" class="btn btn-success">
                                <i class="fas fa-play"></i> Start Trading
                            </button>
                            <button id="stop-trading-btn" class="btn btn-danger" disabled>
                                <i class="fas fa-stop"></i> Stop Trading
                            </button>
                            <button id="reset-trading-btn" class="btn btn-secondary">
                                <i class="fas fa-redo"></i> Reset
                            </button>
                        </div>
                        
                        <div id="live-trading-buttons" style="display: none;">
                            <button id="start-live-trading-btn" class="btn btn-primary">
                                <i class="fas fa-play"></i> Start Live Trading
                            </button>
                            <button id="stop-live-trading-btn" class="btn btn-danger" disabled>
                                <i class="fas fa-stop"></i> Stop Trading
                            </button>
                        </div>
                    </div>
                    
                    <!-- Widget Panel Toggle -->
                    <button class="widget-panel-toggle" id="widget-panel-toggle" aria-label="Toggle widget panel">
                        <i class="fas fa-tachometer-alt"></i>
                    </button>
                    
                    <!-- Clock -->
                    <div class="clock-container">
                        <i class="far fa-clock"></i>
                        <span id="clock-display">2025-06-15 21:03:07 UTC</span>
                    </div>
                </div>
                
                <!-- Widget Panel -->
                <div class="widget-panel" id="widget-panel">
                    <div class="widget-header">
                        <h3>Trading Dashboard</h3>
                        <button id="refresh-widgets-btn" class="btn-sm btn-secondary" aria-label="Refresh widgets">
                            <i class="fas fa-sync-alt"></i>
                        </button>
                    </div>
                    
                    <div class="widget-content">
                        <!-- Market Info Widget -->
                        <div class="widget-item">
                            <div class="widget-item-title">MARKET INFO</div>
                            <div class="metric-row">
                                <div class="metric-label">Symbol</div>
                                <div class="metric-value" id="market-symbol">BTC/USDT</div>
                            </div>
                            <div class="metric-row">
                                <div class="metric-label">Current Price</div>
                                <div class="metric-value" id="market-price">$0.00</div>
                            </div>
                            <div class="metric-row">
                                <div class="metric-label">24h Change</div>
                                <div class="metric-value" id="market-change">0.00%</div>
                            </div>
                            <div class="metric-row">
                                <div class="metric-label">24h Volume</div>
                                <div class="metric-value" id="market-volume">$0.00M</div>
                            </div>
                            <div class="metric-row">
                                <div class="metric-label">Last Update</div>
                                <div class="metric-value" id="last-tick-info">--:--:--</div>
                            </div>
                        </div>
                        
                        <!-- Position Info Widget -->
                        <div class="widget-item" id="position-info" style="display: none;">
                            <div class="widget-item-title">CURRENT POSITION</div>
                            <div class="metric-row">
                                <div class="metric-label">Type</div>
                                <div class="metric-value" id="position-type">LONG</div>
                            </div>
                            <div class="metric-row">
                                <div class="metric-label">Entry Price</div>
                                <div class="metric-value" id="position-entry-price">$0.00</div>
                            </div>
                            <div class="metric-row">
                                <div class="metric-label">Current Price</div>
                                <div class="metric-value" id="position-current-price">$0.00</div>
                            </div>
                            <div class="metric-row">
                                <div class="metric-label">Unrealized P&L</div>
                                <div class="metric-value" id="position-pnl">$0.00 (0.00%)</div>
                            </div>
                            <div class="metric-row">
                                <div class="metric-label">Take Profit</div>
                                <div class="metric-value" id="position-tp">$0.00</div>
                            </div>
                            <div class="metric-row">
                                <div class="metric-label">Stop Loss</div>
                                <div class="metric-value" id="position-sl">$0.00</div>
                            </div>
                            <div class="position-actions">
                                <button id="position-close-btn" class="btn btn-danger btn-block">
                                    <i class="fas fa-times"></i> Close Position
                                </button>
                            </div>
                        </div>
                        
                        <div class="widget-item" id="no-position-info">
                            <div class="widget-item-title">POSITION</div>
                            <div class="py-2 text-center text-muted">
                                No open position
                            </div>
                        </div>
                        
                        <!-- Performance Widget -->
                        <div class="widget-item">
                            <div class="widget-item-title">PERFORMANCE</div>
                            <div class="metric-row">
                                <div class="metric-label">Total Return</div>
                                <div class="metric-value" id="total-return">0.00%</div>
                            </div>
                            <div class="metric-row">
                                <div class="metric-label">Win Rate</div>
                                <div class="metric-value" id="win-rate">0.0%</div>
                            </div>
                            <div class="metric-row">
                                <div class="metric-label">Profit Factor</div>
                                <div class="metric-value" id="profit-factor">0.00</div>
                            </div>
                            <div class="metric-row">
                                <div class="metric-label">Max Drawdown</div>
                                <div class="metric-value" id="max-drawdown">0.00%</div>
                            </div>
                        </div>
                        
                        <!-- Today's Stats Widget -->
                        <div class="widget-item">
                            <div class="widget-item-title">TODAY'S STATS</div>
                            <div class="metric-row">
                                <div class="metric-label">Trades</div>
                                <div class="metric-value" id="stat-daily-trades">0</div>
                            </div>
                            <div class="metric-row">
                                <div class="metric-label">P&L</div>
                                <div class="metric-value" id="stat-daily-pnl">$0.00</div>
                            </div>
                        </div>
                        
                        <!-- Export Data -->
                        <button id="export-data-btn" class="btn btn-secondary btn-block">
                            <i class="fas fa-download"></i> Export Trading Data
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Log Container -->
            <div class="log-container" id="log-container">
                <div class="log-header">
                    <div class="log-title">Activity Log</div>
                    <button class="btn-sm btn-secondary" id="log-toggle-btn" aria-label="Toggle log">
                        <i class="fas fa-chevron-down"></i>
                    </button>
                </div>
                <div id="logMessages"></div>
            </div>
        </main>
    </div>
    
    <!-- Status Bar -->
    <div class="status-bar" id="status-bar">
        <div id="status-message">Status message</div>
        <div class="status-progress" id="status-progress"></div>
    </div>
    
    <!-- API Configuration Modal -->
    <div class="modal-backdrop" id="apiConfigModal">
        <div class="modal">
            <div class="modal-header">
                <div class="modal-title">API Configuration</div>
                <button class="modal-close" id="closeApiConfigModal" aria-label="Close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="modal-api-key">API Key</label>
                    <input type="text" id="modal-api-key" class="form-control" placeholder="Enter your API key">
                </div>
                <div class="form-group">
                    <label for="modal-api-secret">API Secret</label>
                    <input type="password" id="modal-api-secret" class="form-control" placeholder="Enter your API secret">
                </div>
                <div class="form-group">
                    <div class="d-flex align-items-center">
                        <label class="toggle-switch">
                            <input type="checkbox" id="modal-use-testnet-toggle" checked>
                            <span class="slider"></span>
                        </label>
                        <span class="switch-label">Use Testnet</span>
                    </div>
                    <small class="text-muted">Enable this for testing with virtual funds.</small>
                </div>
                <div class="mb-3">
                    <small class="text-muted">
                        <i class="fas fa-info-circle"></i> Your API credentials are stored securely and never shared.
                    </small>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelApiConfig">Cancel</button>
                <button class="btn btn-primary" id="saveApiConfig">Save Configuration</button>
            </div>
        </div>
    </div>
    
    <!-- Strategy Settings Modal -->
    <div class="modal-backdrop" id="strategyModal">
        <div class="modal">
            <div class="modal-header">
                <div class="modal-title">Strategy Settings</div>
                <button class="modal-close" id="closeStrategyModal" aria-label="Close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="strategy-select">Strategy</label>
                    <select id="strategy-select" class="form-control">
                        <option value="bollingerBandsVolume">Bollinger Bands with Volume</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="bb-length">Bollinger Bands Period</label>
                    <div class="d-flex align-items-center">
                        <input type="range" id="bb-length" class="form-control" min="10" max="50" value="20">
                        <span id="bb-length-value" class="ml-2">20</span>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="bb-dev">Bollinger Bands Deviation</label>
                    <div class="d-flex align-items-center">
                        <input type="range" id="bb-dev" class="form-control" min="1" max="4" step="0.1" value="2">
                        <span id="bb-dev-value" class="ml-2">2</span>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="volume-candles">Volume Analysis Period</label>
                    <div class="d-flex align-items-center">
                        <input type="range" id="volume-candles" class="form-control" min="1" max="10" value="3">
                        <span id="volume-candles-value" class="ml-2">3</span>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="volume-increase">Volume Increase Threshold (%)</label>
                    <div class="d-flex align-items-center">
                        <input type="range" id="volume-increase" class="form-control" min="5" max="50" value="20">
                        <span id="volume-increase-value" class="ml-2">20</span>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelStrategySettings">Cancel</button>
                <button class="btn btn-primary" id="saveStrategySettings">Save Settings</button>
            </div>
        </div>
    </div>
    
    <!-- Risk Management Modal -->
    <div class="modal-backdrop" id="riskManagementModal">
        <div class="modal">
            <div class="modal-header">
                <div class="modal-title">Risk Management</div>
                <button class="modal-close" id="closeRiskManagementModal" aria-label="Close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="initial-capital">Initial Capital (USDT)</label>
                    <input type="number" id="initial-capital" class="form-control" min="100" value="10000">
                </div>
                
                <div class="form-group">
                    <label for="position-size">Position Size (% of balance)</label>
                    <div class="d-flex align-items-center">
                        <input type="range" id="position-size" class="form-control" min="1" max="100" value="10">
                        <span id="position-size-value" class="ml-2">10%</span>
                    </div>
                </div>
                
                <div class="form-group">
                    <div class="d-flex align-items-center mb-2">
                        <label class="toggle-switch">
                            <input type="checkbox" id="take-profit-toggle" checked>
                            <span class="slider"></span>
                        </label>
                        <span class="switch-label">Take Profit</span>
                    </div>
                    <input type="number" id="take-profit-value" class="form-control" min="0.1" step="0.1" value="3" aria-label="Take profit percentage">
                    <small class="text-muted">Percentage from entry price</small>
                </div>
                
                <div class="form-group">
                    <div class="d-flex align-items-center mb-2">
                        <label class="toggle-switch">
                            <input type="checkbox" id="stop-loss-toggle" checked>
                            <span class="slider"></span>
                        </label>
                        <span class="switch-label">Stop Loss</span>
                    </div>
                    <input type="number" id="stop-loss-value" class="form-control" min="0.1" step="0.1" value="2" aria-label="Stop loss percentage">
                    <small class="text-muted">Percentage from entry price</small>
                </div>
                
                <div class="form-group">
                    <div class="d-flex align-items-center mb-2">
                        <label class="toggle-switch">
                            <input type="checkbox" id="trailing-stop-toggle">
                            <span class="slider"></span>
                        </label>
                        <span class="switch-label">Trailing Stop</span>
                    </div>
                    <input type="number" id="trailing-stop-value" class="form-control" min="0.1" step="0.1" value="1.5" disabled aria-label="Trailing stop percentage">
                    <small class="text-muted">Percentage from highest/lowest price</small>
                </div>
                
                <div class="form-group">
                    <div class="d-flex align-items-center">
                        <label class="toggle-switch">
                            <input type="checkbox" id="auto-trade-toggle" checked>
                            <span class="slider"></span>
                        </label>
                        <span class="switch-label">Auto-Trading</span>
                    </div>
                    <small class="text-muted">Automatically execute trades based on signals</small>
                </div>
                
                <div class="form-group">
                    <div class="d-flex align-items-center">
                        <label class="toggle-switch">
                            <input type="checkbox" id="show-position-lines-toggle" checked>
                            <span class="slider"></span>
                        </label>
                        <span class="switch-label">Show Position Lines</span>
                    </div>
                    <small class="text-muted">Display entry, take profit and stop loss levels</small>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelRiskSettings">Cancel</button>
                <button class="btn btn-primary" id="saveRiskSettings">Save Settings</button>
            </div>
        </div>
    </div>
    
    <!-- Notification Settings Modal -->
    <div class="modal-backdrop" id="notificationsModal">
        <div class="modal">
            <div class="modal-header">
                <div class="modal-title">Notification Settings</div>
                <button class="modal-close" id="closeNotificationsModal" aria-label="Close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <div class="d-flex align-items-center">
                        <label class="toggle-switch">
                            <input type="checkbox" id="browser-notifications-toggle" checked>
                            <span class="slider"></span>
                        </label>
                        <span class="switch-label">Browser Notifications</span>
                    </div>
                    <small class="text-muted">Show browser notifications for important events</small>
                </div>
                
                <div class="form-group">
                    <div class="d-flex align-items-center">
                        <label class="toggle-switch">
                            <input type="checkbox" id="sound-notifications-toggle" checked>
                            <span class="slider"></span>
                        </label>
                        <span class="switch-label">Sound Notifications</span>
                    </div>
                    <small class="text-muted">Play sounds for important events</small>
                </div>
                
                <div class="form-group">
                    <div class="d-flex align-items-center mb-2">
                        <label class="toggle-switch">
                            <input type="checkbox" id="discord-notifications-toggle">
                            <span class="slider"></span>
                        </label>
                        <span class="switch-label">Discord Notifications</span>
                    </div>
                    <input type="text" id="discord-webhook" class="form-control" placeholder="Discord webhook URL" disabled>
                    <small class="text-muted">Send trade notifications to Discord</small>
                </div>
                
                <div class="mt-3">
                    <button id="test-discord-btn" class="btn btn-secondary btn-sm">
                        <i class="fab fa-discord"></i> Test Discord Webhook
                    </button>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelNotificationSettings">Cancel</button>
                <button class="btn btn-primary" id="saveNotificationSettings">Save Settings</button>
            </div>
        </div>
    </div>
    
    
    <!-- Strategy Builder Modal -->
    <div class="modal-backdrop" id="strategyBuilderModal">
        <div class="modal">
            <div class="modal-header">
                <div class="modal-title">Strategy Builder</div>
                <button class="modal-close" id="closeStrategyBuilderModal" aria-label="Close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="strategy-name">Strategy Name</label>
                    <input type="text" id="strategy-name" class="form-control" placeholder="Enter strategy name">
                </div>
                
                <div class="form-group">
                    <label for="strategy-description">Description</label>
                    <textarea id="strategy-description" class="form-control" rows="3" placeholder="Describe your strategy"></textarea>
                </div>
                
                <h6>Entry Conditions</h6>
                <div class="form-group">
                    <label for="entry-indicator">Primary Indicator</label>
                    <select id="entry-indicator" class="form-control">
                        <option value="bollinger">Bollinger Bands</option>
                        <option value="rsi">RSI</option>
                        <option value="macd">MACD</option>
                        <option value="sma">Simple Moving Average</option>
                        <option value="ema">Exponential Moving Average</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="entry-condition">Entry Condition</label>
                    <select id="entry-condition" class="form-control">
                        <option value="above">Price above indicator</option>
                        <option value="below">Price below indicator</option>
                        <option value="cross_above">Price crosses above</option>
                        <option value="cross_below">Price crosses below</option>
                    </select>
                </div>
                
                <h6>Exit Conditions</h6>
                <div class="form-group">
                    <label for="exit-method">Exit Method</label>
                    <select id="exit-method" class="form-control">
                        <option value="opposite_signal">Opposite Signal</option>
                        <option value="take_profit">Take Profit %</option>
                        <option value="stop_loss">Stop Loss %</option>
                        <option value="trailing_stop">Trailing Stop</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="risk-reward">Risk/Reward Ratio</label>
                    <input type="number" id="risk-reward" class="form-control" min="1" max="10" step="0.1" value="2">
                </div>
                
                <div class="alert alert-info" role="alert">
                    <strong>Note:</strong> Custom strategies are saved locally and can be backtested using the Backtester module.
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelStrategyBuilder">Cancel</button>
                <button class="btn btn-primary" id="saveStrategy">Save Strategy</button>
            </div>
        </div>
    </div>
    
    <!-- Version Info -->
    <div class="version-info">Volty Trading Bot v2.0.0 | Last Updated: 2025-06-15</div>
    
    <!-- Scripts -->
    <script type="module" src="js/secure-storage.js"></script>
    <script type="module" src="js/api-client.js"></script>
    <script type="module" src="js/trading-strategies.js"></script>
    <script type="module" src="js/position-manager.js"></script>
    <script type="module" src="js/ui-manager.js"></script>
    <script type="module" src="js/main.js"></script>
    
    <script>
        // Strategy Builder functionality
        function openStrategyBuilder() {
            document.getElementById('strategyBuilderModal').style.display = 'flex';
        }
        
        document.getElementById('closeStrategyBuilderModal').addEventListener('click', function() {
            document.getElementById('strategyBuilderModal').style.display = 'none';
        });
        
        document.getElementById('cancelStrategyBuilder').addEventListener('click', function() {
            document.getElementById('strategyBuilderModal').style.display = 'none';
        });
        
        document.getElementById('saveStrategy').addEventListener('click', function() {
            const strategyName = document.getElementById('strategy-name').value;
            const description = document.getElementById('strategy-description').value;
            const entryIndicator = document.getElementById('entry-indicator').value;
            const entryCondition = document.getElementById('entry-condition').value;
            const exitMethod = document.getElementById('exit-method').value;
            const riskReward = document.getElementById('risk-reward').value;
            
            if (!strategyName) {
                alert('Please enter a strategy name');
                return;
            }
            
            const strategy = {
                name: strategyName,
                description: description,
                entryIndicator: entryIndicator,
                entryCondition: entryCondition,
                exitMethod: exitMethod,
                riskReward: parseFloat(riskReward),
                created: new Date().toISOString()
            };
            
            // Save to localStorage
            const strategies = JSON.parse(localStorage.getItem('customStrategies') || '[]');
            strategies.push(strategy);
            localStorage.setItem('customStrategies', JSON.stringify(strategies));
            
            alert('Strategy saved successfully!');
            document.getElementById('strategyBuilderModal').style.display = 'none';
            
            // Clear form
            document.getElementById('strategy-name').value = '';
            document.getElementById('strategy-description').value = '';
        });
        
        // Close modal when clicking outside
        document.getElementById('strategyBuilderModal').addEventListener('click', function(e) {
            if (e.target === this) {
                this.style.display = 'none';
            }
        });
    </script>
</body>
</html>
